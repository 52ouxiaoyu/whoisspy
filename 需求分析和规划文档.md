# 谁是卧底游戏 - 需求分析和规划文档

## 1. 项目概述

### 1.1 项目名称
谁是卧底

### 1.2 项目简介
"谁是卧底"是一款多人参与的社交推理类单机游戏，玩家分为平民和卧底两种角色。平民和卧底各自拥有相似但不同的词汇。游戏过程中，玩家轮流描述自己的词汇，通过观察他人的描述来判断谁是卧底，最终通过投票淘汰可疑玩家。本游戏为纯本地应用，无需网络连接即可完整运行所有功能。

### 1.3 目标用户
- 社交聚会参与者
- 团建活动组织者
- 朋友间娱乐
- 喜欢推理游戏的用户

### 1.4 平台支持
- Android 移动平台

## 2. 功能需求分析

### 2.1 核心游戏功能

#### 2.1.1 游戏设置
- 玩家数量设置（4-12人）
- 1-2个卧底、0-1个白板

#### 2.1.2 玩家管理
- 基础玩家名称生成
- 玩家列表展示

#### 2.1.3 角色分配
- 随机分配角色（平民、卧底）
- 词汇对选择与分配
- 角色与词汇展示界面

#### 2.1.4 游戏流程控制
- 发言阶段管理
- 投票阶段管理
- 淘汰机制
- 胜利条件判断

#### 2.1.5 词库管理
- 从JSON文件加载预设词汇库
- 词汇对随机选择
- 确保使用到所有词汇对，避免重复使用

### 2.2 辅助功能

#### 2.2.1 游戏结果展示
- 游戏结束时显示胜负结果
- 记录游戏结束状态

#### 2.2.2 用户体验优化
- 简洁直观的界面
- 清晰的操作反馈
- 错误处理与提示

## 3. 非功能需求

### 3.1 性能需求
- 应用启动时间 < 3秒
- 页面切换流畅
- 内存占用优化

### 3.2 可用性需求
- 界面简洁直观
- 操作流程清晰
- 适配不同屏幕尺寸

### 3.3 安全性需求
- 无需网络权限，保护用户隐私

### 3.4 兼容性需求
- 支持 Android 8.0 及以上版本
- 适配主流分辨率设备

## 4. 系统架构设计

### 4.1 整体架构
- 简化版架构设计
- 核心：视图层 + 业务逻辑层
- 主要模块：游戏管理模块、UI模块

### 4.2 技术选型
- 开发语言：Kotlin
- UI 框架：AndroidX, Material Design
- 数据存储：JSON文件（词汇数据）
- 视图绑定：ViewBinding

### 4.3 关键类设计

#### 4.3.1 数据模型层
- WordPair：词汇对数据模型
- Player：玩家信息数据模型
- GameSettings：游戏设置数据模型

#### 4.3.2 业务逻辑层
- GameManager：游戏核心逻辑管理，负责游戏流程控制、角色分配、词汇管理等

#### 4.3.3 视图层
- GameSetupActivity：游戏设置界面
- GameActivity：游戏进行界面

## 5. 数据存储设计

### 5.1 JSON文件设计
- 文件名称：undercover_words.json
- 存储路径：项目根目录（开发阶段）
- 数据结构：
  ```json
  [
    {
      "id": "1",
      "normal_word": "饺子",
      "undercover_word": "馄饨",
      "category": "食物",
      "difficulty": "easy"
    }
  ]
  ```

### 5.2 词汇加载策略
- 开发阶段：从指定路径的JSON文件加载
- 应用发布：将JSON文件移至assets文件夹，通过context.assets.open()读取

## 6. 界面设计

### 6.1 界面布局规划
- 游戏设置界面：玩家数量设置
- 游戏进行界面：发言、投票、结果展示

### 6.2 UI/UX 设计原则
- 简洁明了的界面风格
- 一致的视觉元素和交互模式
- 清晰的操作指引
- 及时的反馈提示

